diff --git a/Users/michael/Projects/oss/claude-transcript/convert-claude-history.ts b/Users/michael/Projects/oss/claude-transcript/convert-claude-history.ts
index 1234567..abcdefg 100644
--- a/Users/michael/Projects/oss/claude-transcript/convert-claude-history.ts
+++ b/Users/michael/Projects/oss/claude-transcript/convert-claude-history.ts
@@ -76,8 +76,27 @@
       }
     }
   } else if (typeof entry.message.content === 'object' && entry.message.content.type === 'tool_result') {
-    // Output tool result content without blockquotes
-    if (entry.message.content.content) {
+    // Prefer toolUseResult over tool_result content
+    if (entry.message.toolUseResult) {
+      // Check if toolUseResult has a file object
+      if (entry.message.toolUseResult.file) {
+        const file = entry.message.toolUseResult.file;
+        output.push(file.filePath);
+        
+        // Determine language from file extension
+        const ext = file.filePath.split('.').pop()?.toLowerCase() || '';
+        const language = getLanguageFromExtension(ext);
+        
+        output.push(`\`\`\`${language}`);
+        output.push(file.content);
+        output.push('```');
+      } else {
+        output.push('```json');
+        output.push(JSON.stringify(entry.message.toolUseResult, null, 2));
+        output.push('```');
+      }
+    } else if (entry.message.content.content) {
+      // Fallback to tool_result content if no toolUseResult
       output.push('```');
       const contentStr = typeof entry.message.content.content === 'string'
         ? entry.message.content.content
@@ -85,13 +104,6 @@
       output.push(contentStr);
       output.push('```');
     }
-
-    // Output toolUseResult
-    if (entry.message.toolUseResult) {
-      output.push('```json');
-      output.push(JSON.stringify(entry.message.toolUseResult, null, 2));
-      output.push('```');
-    }
   } else {
     // Unknown format
     output.push(`## Unknown user line #${lineNumber}`);