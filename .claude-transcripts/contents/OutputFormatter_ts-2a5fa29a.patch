diff --git a/Users/michael/Projects/oss/claude-transcript/src/OutputFormatter.ts b/Users/michael/Projects/oss/claude-transcript/src/OutputFormatter.ts
index 1234567..abcdefg 100644
--- a/Users/michael/Projects/oss/claude-transcript/src/OutputFormatter.ts
+++ b/Users/michael/Projects/oss/claude-transcript/src/OutputFormatter.ts
@@ -2,19 +2,29 @@
 import { join, basename } from 'node:path'
 import { createHash } from 'node:crypto'
 import { filterAnsi, truncateLine, escapeCodeFences, trimBlankLines, getLanguageFromExtension, createImageFile } from './utils.ts'
-import type { Item, Content, ToolUseResult } from './types.ts'
+import type { Item, Content, ToolUseResult, Entry } from './types.ts'
 import { CommandParser } from './CommandParser.ts'
 import { ToolResultFormatter } from './ToolResultFormatter.ts'
 
+interface FormatterContext {
+  toolUseTree: Map<string, Entry[]>
+  itemTree: Map<string, Item>
+}
+
 export class OutputFormatter {
   private defaultSaveOnly: boolean
   private isDebug: boolean
+  private context: FormatterContext | null = null
 
   constructor(defaultSaveOnly: boolean, isDebug: boolean = false) {
     this.defaultSaveOnly = defaultSaveOnly
     this.isDebug = isDebug
   }
 
+  setContext(context: FormatterContext) {
+    this.context = context
+  }
+
   format(options: {
     saveOnly?: boolean
     content: string